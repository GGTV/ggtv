user.add=insert into User (id, name, first_name, middle_name, last_name, gender, locale, link, create_time) values ({0}, {1}, {2}, {3}, {4}, {5}, {6}, {7}, now()) on duplicate key update name={1}, first_name={2}, middle_name={3}, last_name={4}, gender={5}, locale={6}, link={7}
user.loadId=select id from User
video.getId=select id from Video where `key`={0}
video.add=insert into Video (url, source_url, title, thumb, type, alt, description, icon, `key`, create_time) values ({0}, {1}, {2}, {3}, {4}, {5}, {6}, {7}, {8}, now())
stream.add=insert into Stream (post_id, viewer_id, app_id, source_id, actor_id, target_id, message, description, video_id, created_time, updated_time) values ({0}, {1}, {2}, {3}, {4}, {5}, {6}, {7}, {8}, {9}, {10}) on duplicate key update viewer_id={1}, video_id={8}
stream.loadSourceId=select distinct source_id from Stream
user.loadAppUser=select * from User where access_token is not null and (sync_time is null or sync_time < {0})
user.needSync=select * from User where id in ({0}) and (sync_time is null or sync_time < {1})
user.refreshSyncTime=update User set sync_time=now() where id={0}
video.loadVideoIds_has_cate=select `key` from Video where category is not null and valid={0}
video.loadVideoIds_no_cate=select `key` from Video where category is null and valid={0}
video.updateStatus=update Video set valid={1} where `key`={0}
video.updateInfo=update Video set category={1}, duration={2} where `key`={0}